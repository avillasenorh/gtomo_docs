{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Home"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"data/ehb/","text":"EHB bulletin The most suitable database of earthquake locations and seismic phases for global travel time tomography is the EHB bulletin. The main characteristics of this bulletin are the following: uses a modern Earth model (ak135) uses depth phases pP, pwP and sP for depth determination (and these phases are dynamically re-identified) takes into account the Earth's 3D structure through the use of patch corrections Versions of the bulletin The original EHB bulletin (Engdahl et al. 1998) included nearly 100,000 events from 1964 to 1995 that were well constrained with teleseismic phases. Subsequently Bob Engdahl produced updated versions of the EHB bulletin, including also events well constrained with regional phases. These bulletins were named EHB02 (1964-2000), EHB04 (1964-2004), and EHB08 (1960-2008). More recently the ISC has taken over the task of continuosly updating the EHB bulletin (Weston et al., 2018; Engdahl et al., 2020) and the data is publicly available at the ISC-EHB web page . Data formats RES file The format of the RES files in the ISC-EHB bulletin is described here . EHB RES format EHB02 RES format EHB04 RES format EHB08 RES format ISC-EHB RES format Coordinates in the RES files are in geocentric colatitude \\theta^\\prime \\in [0^\\circ,180^\\circ] and geocentric longitude \\lambda^\\prime \\in [0^\\circ,360^\\circ) . Not that in the descriptions of the RES format it is incorrectly stated that coordinates are in geocentric latitude (they are in geocentric colatitude ). HDF file EHB HDF format EHB04 SEL format EHB08 HDF format ISC-EHB HDF format Coordinates in the HDF files are in geographic (geodetic) latitude \\varphi \\in [-90^\\circ, 90^\\circ] and geographic longitude \\lambda \\in (-180^\\circ,180^\\circ] . Station file The latest EHB datasets (EHB08 and ISC-EHB) also include a station file stations_ehb , with station codes and coordinates. References Engdahl, E. R., van der Hilst, R. D., & Buland, R. (1998). Global Teleseismic Earthquake Relocation with Improved Travel Times and Procedures for Depth Determination. Bull. Seismol. Soc. Am., 88(3), 722\u2013743. Weston, J., Engdahl, E. R., Harris, J., Di Giacomo, D., & Storchak, D. A. (2018). ISC-EHB: reconstruction of a robust earthquake data set. Geophysical Journal International, 214(1), 474\u2013484. http://doi.org/10.1093/gji/ggy155. Engdahl, E. R., Di Giacomo, D., Sakarya, B., Gkarlaouni, C. G., Harris, J., & Storchak, D. A. (2020). ISC\u2010EHB 1964\u20132016, an Improved Data Set for Studies of Earth Structure and Global Seismicity. Earth and Space Science, 7(1), e2019EA000897. http://doi.org/10.1029/2019EA000897.","title":"EHB bulletin"},{"location":"data/ehb/#ehb-bulletin","text":"The most suitable database of earthquake locations and seismic phases for global travel time tomography is the EHB bulletin. The main characteristics of this bulletin are the following: uses a modern Earth model (ak135) uses depth phases pP, pwP and sP for depth determination (and these phases are dynamically re-identified) takes into account the Earth's 3D structure through the use of patch corrections","title":"EHB bulletin"},{"location":"data/ehb/#versions-of-the-bulletin","text":"The original EHB bulletin (Engdahl et al. 1998) included nearly 100,000 events from 1964 to 1995 that were well constrained with teleseismic phases. Subsequently Bob Engdahl produced updated versions of the EHB bulletin, including also events well constrained with regional phases. These bulletins were named EHB02 (1964-2000), EHB04 (1964-2004), and EHB08 (1960-2008). More recently the ISC has taken over the task of continuosly updating the EHB bulletin (Weston et al., 2018; Engdahl et al., 2020) and the data is publicly available at the ISC-EHB web page .","title":"Versions of the bulletin"},{"location":"data/ehb/#data-formats","text":"","title":"Data formats"},{"location":"data/ehb/#res-file","text":"The format of the RES files in the ISC-EHB bulletin is described here . EHB RES format EHB02 RES format EHB04 RES format EHB08 RES format ISC-EHB RES format Coordinates in the RES files are in geocentric colatitude \\theta^\\prime \\in [0^\\circ,180^\\circ] and geocentric longitude \\lambda^\\prime \\in [0^\\circ,360^\\circ) . Not that in the descriptions of the RES format it is incorrectly stated that coordinates are in geocentric latitude (they are in geocentric colatitude ).","title":"RES file"},{"location":"data/ehb/#hdf-file","text":"EHB HDF format EHB04 SEL format EHB08 HDF format ISC-EHB HDF format Coordinates in the HDF files are in geographic (geodetic) latitude \\varphi \\in [-90^\\circ, 90^\\circ] and geographic longitude \\lambda \\in (-180^\\circ,180^\\circ] .","title":"HDF file"},{"location":"data/ehb/#station-file","text":"The latest EHB datasets (EHB08 and ISC-EHB) also include a station file stations_ehb , with station codes and coordinates.","title":"Station file"},{"location":"data/ehb/#references","text":"Engdahl, E. R., van der Hilst, R. D., & Buland, R. (1998). Global Teleseismic Earthquake Relocation with Improved Travel Times and Procedures for Depth Determination. Bull. Seismol. Soc. Am., 88(3), 722\u2013743. Weston, J., Engdahl, E. R., Harris, J., Di Giacomo, D., & Storchak, D. A. (2018). ISC-EHB: reconstruction of a robust earthquake data set. Geophysical Journal International, 214(1), 474\u2013484. http://doi.org/10.1093/gji/ggy155. Engdahl, E. R., Di Giacomo, D., Sakarya, B., Gkarlaouni, C. G., Harris, J., & Storchak, D. A. (2020). ISC\u2010EHB 1964\u20132016, an Improved Data Set for Studies of Earth Structure and Global Seismicity. Earth and Space Science, 7(1), e2019EA000897. http://doi.org/10.1029/2019EA000897.","title":"References"},{"location":"data/ehb02_res_format/","text":"*RES FILE FORMAT *RES file read statement: read(1,100) 1 nev,ahyp,isol,iseq,openaz,openaz2, 1 iyr,imon,iday,ihold,ihr,imin,sec, 1 elat,elon,depth,fmb,fms,ntot,ntel, 2 sta,slat,slon,elev,delta,azim, 3 onset,phasej,iphj,iphi,ipho, 5 rdtdd,rdelta,razim,dbot, 6 gblat,gblon,stadel,bdep,tbath,twater, 7 obstt,iprec,prett,rawres, 8 ecor,scor,elcor,resid,iflg,wgt, 9 tdelta,ttime, 9 delisc,resisc 100 format(i7,1x,a1,a3,a2,2f6.1,i5,2i3,i2,2i3, 1 f6.2,2f8.3,f6.1,2f4.1,2i5,5x, 1 1x,a6,2f8.3,f7.3,2f8.3,5x, 2 1x,a1,1x,a8,3i4,5x, 3 f8.4,2f8.3,f7.1,5x, 3 3f8.3,f7.3,2f7.2,5x, 4 f10.2,i3,f10.2,f7.2,5x, 5 4f7.2,i2,f5.2,5x, 6 f8.3,f10.2,5x,f8.3,f7.2) Variable definitions: nev sequential event number i7 ahyp secondary azimuth gap of stations used a1 blank = <= 180 deg Z = > 180 deg isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free LEQ = depth fixed by program FEQ = depth fixed by Engdahl XEQ = poor solution iseq other info a2 X = explosion/cavity collapse Xx = location known to x km M = focal mechanism available Mx = location known to x km openaz azimuth gap f6.1 openaz2 secondary azimuth gap f6.1 iyr year i3 imon month i3 iday day i3 ihold 0 = free depth solution i2 1 = fixed depth solution 2 = fixed hypocenter solution ihr origin hour i3 imin origin minute i3 sec origin second f6.2 elat origin geocentric latitude f8.3 elon origin geocentric longitude f8.3 depth origin depth f6.1 fmb origin mb magnitude f4.1 fms origin Ms magnitude f4.1 ntot number of stations used i5 ntel number of teleseismic stations used i5 (tdelta >= 28 deg) -------------------------------------------------------- sta station code a6 slat station geocentric latitude f8.3 slon station geocentric longitude f8.3 elev station elevation (km) f7.3 delta distance to station f8.3 azim azimuth to station f8.3 --------------------------------------------------------- onset phase onset(i,e, ) a1 phasej assigned phase name a8 iphj assigned numerical phase id i4 (999 if unknown) iphi ISC numerical phase id i4 (999 if unknown) ipho reported numerical phase id i4 (999 if unknown) --------------------------------------------------------- rdtdd phase ray parameter f8.4 rdelta phase distance to station (major arc) f8.3 razim phase ray azimuth f8.3 dbot ray bottoming depth f7.1 (for selected phases only) --------------------------------------------------------- gblat bounce point geocentric latitude f8.3 gblon bounce point geocentric longitude f8.3 stadel distance to station from bounce point f8.3 bdep bounce point topo(-) or bath(+) in km f7.3 tbath bounce point crustal correction f7.2 (subtracted from observed travel time) twater bounce point water travel time f7.2 (subtracted from observed travel time) --------------------------------------------------------- obstt observed travel time (uncorrected) f10.2 iprec arrival time reading precision i3 3 to nearest 1/10th minute 2 to nearest minute 1 to nearest ten seconds 0 to nearest second -1 to 1/10th second -2 to 1/100th second prett predicted travel time (uncorrected) f10.2 rawres observed residual (uncorrected) f7.2 --------------------------------------------------------- ecor station elevation correction f7.2 (subtracted from observed travel time) scor patch 'station' correction f7.2 (subtracted from observed travel time) elcor ellipticity correction f7.2 (subtracted from observed travel time) resid observed residual f7.2 (999.99 if unknown) iflg 0 = first arriving P phase used i2 1 = first arriving P phase not used 2 = later phase used 3 = later phase not used wgt residual weight f5.2 ( = 0 if not used) --------------------------------------------------------- tdelta surface focus distance f8.3 ( = 0 for upgoing phases) ttime observed surface focus travel time f10.2 (corrected) ( = 0 for upgoing phases) --------------------------------------------------------- delisc ISC distance to station f8.3 (999.999 if unknown) resisc ISC observed residual f7.2 (999.99 if unknown) ---------------------------------------------------------","title":"Ehb02 res format"},{"location":"data/ehb04_res_format/","text":"*RES FILE FORMAT *RES file read statement: read(1,100) 1 nev,isol,iseq,openaz2,ropenaz2,topenaz2 1 iyr,imon,iday,ihold,ihr,imin,sec, 1 elat,elon,depth,fmb,fms,ntot,ntel, 2 sta,slat,slon,elev,delta,azim, 3 comp,onset,phasej,iphj,iphi,ipho, 5 rdtdd,rdelta,razim,dbot, 6 gblat,gblon,stadel,bdep,tbath,twater, 7 obstt,iprec,prett,rawres, 8 ecor,scor,elcor,resid,iflg,wgt, 9 tdelta,ttime, 9 delisc,resisc 100 format(i7,1x,a3,a2,3f6.1,i5,2i3,i2,2i3, 1 f6.2,2f8.3,f6.1,2f4.1,2i5,5x, 1 1x,a6,2f8.3,f7.3,2f8.3,5x, 2 1x,a2,1x,a1,1x,a8,3i4,5x, 3 f8.4,2f8.3,f7.1,5x, 3 3f8.3,f7.3,2f7.2,5x, 4 f10.2,i3,f10.2,f7.2,5x, 5 4f7.2,i2,f5.2,5x, 6 f8.3,f10.2,5x,f8.3,f7.2) Variable definitions: nev sequential event number i7 isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free LEQ = depth fixed by program FEQ = depth fixed by Engdahl XEQ = poor solution iseq other info a2 X = explosion/cavity collapse Xx = location known to x km M = focal mechanism available Mx = location known to x km D = depth reviewed and confirmed openaz2 secondary az gap (all stations) f6.1 ropenaz2 secondary az gap (regional stations) f6.1 topenaz2 secondary az gap (teleseismic stations) f6.1 iyr year i3 imon month i3 iday day i3 ihold 0 = free depth solution i2 1 = fixed depth solution 2 = fixed hypocenter solution ihr origin hour i3 imin origin minute i3 sec origin second f6.2 elat origin geocentric latitude f8.3 elon origin geocentric longitude f8.3 depth origin depth f6.1 fmb origin mb magnitude f4.1 fms origin Ms magnitude f4.1 ntot number of stations used i5 ntel number of teleseismic stations used i5 (tdelta >= 28 deg) -------------------------------------------------------- sta station code a6 slat station geocentric latitude f8.3 slon station geocentric longitude f8.3 elev station elevation (km) f7.3 delta distance to station f8.3 azim azimuth to station f8.3 --------------------------------------------------------- comp instrument & component a2 onset phase onset(i,e, ) a1 phasej assigned phase name a8 iphj assigned numerical phase id i4 (999 if unknown) iphi ISC numerical phase id i4 (999 if unknown) ipho reported numerical phase id i4 (999 if unknown) --------------------------------------------------------- rdtdd phase ray parameter f8.4 rdelta phase distance to station (major arc) f8.3 razim phase ray azimuth f8.3 dbot ray bottoming depth f7.1 (for selected phases only) --------------------------------------------------------- gblat bounce point geocentric latitude f8.3 gblon bounce point geocentric longitude f8.3 stadel distance to station from bounce point f8.3 bdep bounce point topo(-) or bath(+) in km f7.3 tbath bounce point crustal correction f7.2 (subtracted from observed travel time) twater bounce point water travel time f7.2 (subtracted from observed travel time) --------------------------------------------------------- obstt observed travel time (uncorrected) f10.2 iprec arrival time reading precision i3 3 to nearest 1/10th minute 2 to nearest minute 1 to nearest ten seconds 0 to nearest second -1 to 1/10th second -2 to 1/100th second prett predicted travel time (uncorrected) f10.2 rawres observed residual (uncorrected) f7.2 --------------------------------------------------------- ecor station elevation correction f7.2 (subtracted from observed travel time) scor patch 'station' correction f7.2 (subtracted from observed travel time) elcor ellipticity correction f7.2 (subtracted from observed travel time) resid observed residual f7.2 (999.99 if unknown) iflg 0 = first arriving P phase used i2 1 = first arriving P phase not used 2 = later phase used 3 = later phase not used wgt residual weight f5.2 ( = 0 if not used) --------------------------------------------------------- tdelta surface focus distance f8.3 ( = 0 for upgoing phases) ttime observed surface focus travel time f10.2 (corrected) ( = 0 for upgoing phases) --------------------------------------------------------- delisc ISC distance to station f8.3 (999.999 if unknown) resisc ISC observed residual f7.2 (999.99 if unknown) ---------------------------------------------------------","title":"Ehb04 res format"},{"location":"data/ehb04_sel_format/","text":"*HDF FILE FORMAT *HDF file read statement read(1,100) 1 ahyp,isol,iseq,iyr,mon,iday,ihr,min,sec,ad,glat,glon, 2 depth,iscdep,mb,ms,mw,ntot,ntel,ndep,igreg,se,ser,sedep, 3 rstadel,ropenaz2,topenaz2,az1,flen1,az2,flen2,avh 100 format(a1,a3,a2,i2,2i3,1x,2i3,f6.2,a1,2f8.3,2f6.1,3f4.1, 1 4i4,3f8.2,3f6.1,4i4,f5.1) Variable definitions: ahyp secondary az gap (teleseismic stations) a1 blank <= 180 deg Z > 180 deg or for pre-1964 events A <= 180 deg B <= 210 deg and > 180 deg C <= 240 deg and > 210 deg D <= 270 deg and > 240 deg F > 270 deg isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free LEQ = depth fixed by program FEQ = depth fixed by Engdahl XEQ = poor solution iseq other info a2 X = explosion/cavity collapse Xx = location known to x km M = focal mechanism available Mx = location known to x km D = depth reviewed and confirmed iyr year i2 mon month i3 iday day i3 ihr origin hour i4 min origin minute i3 sec origin second f6.2 ad source agency a1 glat geographic latitude f8.3 glon geographic longitude f8.3 depth depth f6.1 iscdep depth reported by ISC f6.1 mb mb magnitude f4.1 ms Ms magnitude f4.1 mw Mw magnitude f4.1 ntot total number of observations used i4 ntel number of teleseismic observations i4 (delta > 28 deg) used ndep number of depth phase observations i4 (delta > 28 deg) used igreg Flinn-Engdahl region number i4 se standard error of observations used f8.2 ser standard error in position (km) f8.2 sedep standard error in depth (km) f8.2 rstadel distance to closest station f6.1 ropenaz2 secondary az gap (regional stations) f6.1 topenaz2 secondary az gap (teleseismic stations) f6.1 az1 semi-axis azimuth f4.0 flen1 semi-axis length f4.1 az2 semi-axis azimuth f4.0 flen2 semi-axis length f4.1 multiply product of len1 and len2 by pi to get area of 90% confidence ellipse avh statistical geometric mean of axes f5.1","title":"Ehb04 sel format"},{"location":"data/ehb08_hdf_format/","text":"*HDF FILE FORMAT *HDF file read statement read(1,100) 1 ahyp,isol,iseq,iyr,mon,iday,ihr,min,sec,ad,glat,glon, 2 depth,iscdep,mb,ms,mw,ntot,ntel,ndep,igreg,se,ser,sedep, 3 rstadel,openaz1,openaz2,az1,flen1,az2,flen2,avh 100 format(a1,a3,a2,i2,2i3,1x,2i3,f6.2,a1,2f8.3,2f6.1,3f4.1, 1 4i4,3f8.2,3f6.1,4i4,f5.1) Variable definitions: ahyp secondary teleseismic azimuth gap a1 blank = <= 180 deg Z = > 180 deg or primary teleseismic azimuth gap A = < 180 deg B = < 210 deg and > 180 deg C = < 240 deg and > 210 deg D = < 270 deg and > 240 deg F = > 270 deg isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free (sedep <= 15 km) WEQ = depth fixed at waveform depth BEQ = depth fixed at BB depth FEQ = depth fixed by Engdahl LEQ = depth fixed by program (sedep > 15 km) XEQ = poor solution (ser > 35 km) iseq other info (b=blank) a2 bx = earthquake location known to x km (if x is a number) bc = only regional event data available Xb = explosion/cavity collapse Xx = explosion location known to x km (if x is a number) Mb = CMT solution available Mx = CMT location known to x km (if x is a number) Md = depth reviewed and accepted Mn = depth unreviewed but provisionally accepted based on => 5 depth phases and/or station(s) at distance(s) less than the focal depth Mr = depth under review Mf = depth set to regional depth estimate Mh = depth set to Harvard CMT depth Mx = depth reviewed but not accepted bd = depth reviewed and accepted bn = depth unreviewed, but provisionally accepted based on => 5 depth phases and/or station(s) at distance(s) less than the focal depth br = depth under review bf = depth set to regional depth estimate bx = depth reviewed but not accepted iyr year i2 mon month i3 iday day i3 ihr origin hour i4 min origin minute i3 sec origin second f6.2 ad source agency a1 glat geographic latitude f8.3 glon geographic longitude f8.3 depth depth f6.1 iscdep ISC depth f6.1 mb mb magnitude f4.1 ms Ms magnitude f4.1 mw Mw magnitude f4.1 ntot total number of stations used i4 ntel number of teleseismic stations i4 (delta > 28 deg) used ndep number of depth phase observations i4 (delta > 28 deg) used igreg Flinn-Engdahl region number i4 se standard error of observations used f8.2 ser standard error in position (km) f8.2 sedep standard error in depth (km) f8.2 rstadel distance to closest station f6.1 openaz1 teleseismic azimuth gap f6.1 openaz2 secondary teleseismic azimuth gap f6.1 az1 semi-axis azimuth f4.0 flen1 semi-axis length f4.1 az2 semi-axis azimuth f4.0 flen2 semi-axis length f4.1 multiply product of len1 and len2 by pi to get area of 90% confidence ellipse avh statistical geometric mean of axes f5.1","title":"Ehb08 hdf format"},{"location":"data/ehb08_res_format/","text":"*RES FILE FORMAT *RES file read statement: read(1,100) 1 nev,isol,iseq,openaz2,ropenaz2,topenaz2 1 iyr,imon,iday,ihold,ihr,imin,sec, 1 elat,elon,depth,fmb,fms,ntot,ntel, 2 sta,slat,slon,elev,delta,azim, 3 comp,onset,phasej,iphj,iphi,ipho, 5 rdtdd,rdelta,razim,dbot, 6 gblat,gblon,stadel,bdep,tbath,twater, 7 obstt,iprec,prett,rawres, 8 ecor,scor,elcor,resid,iflg,wgt, 9 tdelta,ttime, 9 delisc,resisc,w 100 format(i7,1x,a3,a2,3f6.1,i5,2i3,i2,2i3, 1 f6.2,2f8.3,f6.1,2f4.1,2i5,5x, 1 1x,a6,2f8.3,f7.3,2f8.3,5x, 2 1x,a2,1x,a1,1x,a8,3i4,5x, 3 f8.4,2f8.3,f7.1,5x, 3 3f8.3,f7.3,2f7.2,5x, 4 f10.2,i3,f10.2,f7.2,5x, 5 4f7.2,i2,f5.2,5x, 6 f8.3,f10.2,5x,f8.3,f7.2,1x,a1) Variable definitions: nev sequential event number i7 isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free (sedep <= 15 km) WEQ = depth fixed at waveform depth BEQ = depth fixed at BB depth FEQ = depth fixed by Engdahl LEQ = depth fixed by program (sedep > 15 km) XEQ = poor solution (ser > 35 km) iseq other info (b=blank) a2 bx = earthquake location known to x km (if x is a number) Xb = explosion/cavity collapse Xx = explosion location known to x km (if x is a number) Mb = CMT solution available Mx = CMT location known to x km (if x is a number) bd = depth reviewed and accepted br = depth under review bx = depth reviewed but not accepted openaz2 secondary az gap (all stations) f6.1 ropenaz2 secondary az gap (regional stations) f6.1 topenaz2 secondary az gap (teleseismic stations) f6.1 iyr year i5 imon month i3 iday day i3 ihold 0 = free depth solution i2 1 = fixed depth solution 2 = fixed hypocenter solution ihr origin hour i3 imin origin minute i3 sec origin second f6.2 elat origin GEOCENTRIC latitude f8.3 elon origin GEOCENTRIC longitude f8.3 depth origin depth f6.1 fmb origin mb magnitude f4.1 fms origin Ms magnitude f4.1 ntot number of stations used i5 ntel number of teleseismic stations used i5 (tdelta >= 28 deg) -------------------------------------------------------- sta station code a6 slat station GEOCENTRIC latitude f8.3 slon station GEOCENTRIC longitude f8.3 elev station elevation (km) f7.3 delta distance to station f8.3 azim azimuth to station f8.3 --------------------------------------------------------- comp instrument & component a2 onset phase onset(i,e, ) a1 phasej assigned phase name a8 iphj assigned numerical phase id i4 (999 if unknown) iphi ISC numerical phase id i4 (999 if unknown) ipho reported numerical phase id i4 (999 if unknown) --------------------------------------------------------- rdtdd phase ray parameter f8.4 rdelta phase distance to station (major arc) f8.3 razim phase ray azimuth (azimuth to station) f8.3 dbot ray bottoming depth f7.1 (for selected phases only) --------------------------------------------------------- gblat bounce point GEOCENTRIC latitude f8.3 gblon bounce point GEOCENTRIC longitude f8.3 stadel distance to station from bounce point f8.3 bdep bounce point topo(-) or bath(+) in km f7.3 tbath bounce point crustal correction f7.2 (subtracted from observed travel time) twater bounce point water travel time f7.2 (subtracted from observed travel time) --------------------------------------------------------- obstt observed travel time (uncorrected) f10.2 iprec arrival time reading precision i3 3 to nearest 1/10th minute 2 to nearest minute 1 to nearest ten seconds 0 to nearest second -1 to 1/10th second -2 to 1/100th second prett predicted travel time (uncorrected) f10.2 rawres observed residual (uncorrected) f7.2 --------------------------------------------------------- ecor station elevation correction f7.2 (subtracted from observed travel time) scor patch 'station' correction f7.2 (subtracted from observed travel time) FOR GLOBAL TOMOGRAPHY scor SHOULD BE ADDED TO ALL RELEVANT PARAMETERS BEFORE INVERSION OR ELSE THE UPPER MANTLE WILL BE WHITENED! elcor ellipticity correction f7.2 (subtracted from observed travel time) resid observed residual f7.2 (999.99 if unknown) iflg 0 = first arriving P phase used i2 1 = first arriving P phase not used 2 = later phase used 3 = later phase not used wgt residual weight f5.2 ( = 0 if not used) --------------------------------------------------------- tdelta surface focus distance f8.3 ( = 0 for upgoing phases) ttime observed surface focus travel time f10.2 (corrected) ( = 0 for upgoing phases) --------------------------------------------------------- delisc ISC distance to station f8.3 (999.999 if unknown) resisc ISC observed residual f7.2 (999.99 if unknown) --------------------------------------------------------- w Arrival time read from waveform a1 ---------------------------------------------------------","title":"Ehb08 res format"},{"location":"data/isc-ehb_hdf_format/","text":"ISC-EHB (2000-2013) HDF FILE FORMAT *HDF file read statement read(1,100) 1 ahyp,isol,iseq,iyr,mon,iday,ihr,min,sec,ad,glat,glon, 2 depth,iscdep,mb,ms,mw,ntot,ntel,ndep,igreg,se,ser,sedep, 3 rstadel,openaz1,openaz2,az1,flen1,az2,flen2,avh,ievt 100 format(a1,a3,a2,i2,2i3,1x,2i3,f6.2,a1,2f8.3,2f6.1,3f4.1, 1 4i4,3f8.2,3f6.1,4i4,f5.1,i10) Variable definitions: ahyp secondary teleseismic azimuth gap a1 blank = <= 180 deg Z = > 180 deg isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free (sedep <= 15 km) FEQ = depth fixed by review LEQ = depth fixed by program (sedep > 15 km) XEQ = poor solution (ser > 35 km) iseq(1:1) a1 M = GCMT solution available X = explosion iseq(2:2) a1 d = depth constrained by depth phases with sedep < 5 km and at least 3 defining depth phases b = depth set to USGS broadband depth h = depth set to GCMT depth g = depth set to ISC-GEM depth provided there are no other constraints on depth o = depth set to 10 km for oceanic events provided there are no other constraints on depth c = depth set to 15 km for events within known regions of shallow seismicity provided there are no other constraints on depth t = depth set to 15 km for events within a radius (distance and depth) of 55 km to a trench provided there are no other constraints on depth v = depth set to 15 km for events within a radius (distance and depth) of 55 km to a volcano provided there are no other constraints on depth s = depth from research studies i = depth set to ISC depth x = depth reviewed but uncertain DEQ x assigned to events with sedep > 5 and < 15 km n = depth set to nearest neighbor with a well constrained depth z = explosion or earthquake location known to z km where z is a number from 0-9 iyr year i2 mon month i3 iday day i3 ihr origin hour i4 min origin minute i3 sec origin second f6.2 ad source agency a1 glat geographic latitude f8.3 glon geographic longitude f8.3 depth depth f6.1 iscdep ISC depth f6.1 mb mb magnitude f4.1 ms Ms magnitude f4.1 mw Mw magnitude f4.1 ntot total number of defining observations i4 ntel number of defining teleseismic i4 observations (delta > 28 deg ndep number of defining depth phase i4 observations (delta > 28 deg) igreg Flinn-Engdahl region number i4 se standard error of observations used f8.2 ser standard error in position (km) f8.2 sedep standard error in depth (km) f8.2 rstadel distance to closest station f6.1 openaz1 teleseismic azimuth gap f6.1 openaz2 secondary teleseismic azimuth gap f6.1 az1 semi-axis azimuth f4.0 flen1 semi-axis length f4.1 az2 semi-axis azimuth f4.0 flen2 semi-axis length f4.1 multiply product of len1 and len2 by pi to get area of 90% confidence ellipse avh statistical geometric mean of axes f5.1 ievt ISC event identification number i10","title":"Isc ehb hdf format"},{"location":"data/isc-ehb_res_format/","text":"ISC-EHB (2000-2013) RES FILE FORMAT *RES file read statement: read(1,100) 1 nev,isol,iseq,openaz2,ropenaz2,topenaz2 1 iyr,imon,iday,ihold,ihr,imin,sec, 1 elat,elon,depth,fmb,fms,ntot,ntel, 2 sta,slat,slon,elev,delta,azim, 3 comp,onset,phasej,iphj,iphi,ipho, 5 rdtdd,rdelta,razim,dbot, 6 gblat,gblon,stadel,bdep,tbath,twater, 7 obstt,iprec,prett,rawres, 8 ecor,scor,elcor,resid,iflg,wgt, 9 tdelta,ttime, 9 delisc,resisc,w 100 format(i7,1x,a3,a2,3f6.1,i5,2i3,i2,2i3, 1 f6.2,2f8.3,f6.1,2f4.1,2i5,5x, 1 1x,a6,2f8.3,f7.3,2f8.3,5x, 2 1x,a2,1x,a1,1x,a8,3i4,5x, 3 f8.4,2f8.3,f7.1,5x, 3 3f8.3,f7.3,2f7.2,5x, 4 f10.2,i3,f10.2,f7.2,5x, 5 4f7.2,i2,f5.2,5x, 6 f8.3,f10.2,5x,f8.3,f7.2,1x,a1) Variable definitions: nev sequential event number i7 isol solution type a3 HEQ = origin time & hypocenter fixed DEQ = depth free (sedep <= 15 km) FEQ = depth fixed by review LEQ = depth fixed by program (sedep > 15 km) XEQ = poor solution (ser > 35 km) iseq(1:1) M = GCMT solution available a1 X = explosion iseq(2:2) other info (blank=none) a1 d = depth constrained by depth phases with sedep < 5 km and at least 3 defining depth phases b = depth set to USGS broadband depth h = depth set to GCMT depth g = depth set to ISC-GEM depth provided there are no other constraints on depth o = depth set to 10 km for oceanic events provided there are no other constraints on depth c = depth set to 15 km for events within known regions of shallow seismicity provided there are no other constraints on depth t = depth set to 15 km for events within a radius (distance and depth) of 55 km to a trench provided there are no other constraints on depth v = depth set to 15 km for events within a radius (distance and depth) of 55 km to a volcano provided there are no other constraints on depth s = depth from research studies i = depth set to ISC depth x = depth reviewed but uncertain DEQ x assigned to events with sedep > 5 and < 15 km n = depth set to nearest neighbor with a well constrained depth z = explosion or earthquake location known to z km where z is a number from 0-9 openaz2 secondary az gap (all stations) f6.1 ropenaz2 secondary az gap (regional stations) f6.1 topenaz2 secondary az gap (teleseismic stations) f6.1 iyr year i3 imon month i3 iday day i3 ihold 0 = free depth solution i2 1 = fixed depth solution 2 = fixed hypocenter solution ihr origin hour i3 imin origin minute i3 sec origin second f6.2 elat origin geocentric latitude f8.3 elon origin geocentric longitude f8.3 depth origin depth f6.1 fmb origin mb magnitude f4.1 fms origin Ms magnitude f4.1 ntot number of stations used i5 ntel number of teleseismic stations used i5 (tdelta >= 28 deg) -------------------------------------------------------- sta station code a6 slat station geocentric latitude f8.3 slon station geocentric longitude f8.3 elev station elevation (km) f7.3 delta distance to station f8.3 azim azimuth to station f8.3 --------------------------------------------------------- comp instrument & component a2 onset phase onset(i,e, ) a1 phasej assigned phase name a8 iphj assigned numerical phase id i4 (999 if unknown) iphi ISC numerical phase id i4 (999 if unknown) ipho reported numerical phase id i4 (999 if unknown) --------------------------------------------------------- rdtdd phase ray parameter f8.4 rdelta phase distance to station (major arc) f8.3 razim phase ray azimuth f8.3 dbot ray bottoming depth f7.1 (for selected phases only) --------------------------------------------------------- gblat bounce point geocentric latitude f8.3 gblon bounce point geocentric longitude f8.3 stadel distance to station from bounce point f8.3 bdep bounce point topo(-) or bath(+) in km f7.3 tbath bounce point crustal correction f7.2 (subtracted from observed travel time) twater bounce point water travel time f7.2 (subtracted from observed travel time) --------------------------------------------------------- obstt observed travel time (uncorrected) f10.2 iprec arrival time reading precision i3 3 to nearest 1/10th minute 2 to nearest minute 1 to nearest ten seconds 0 to nearest second -1 to 1/10th second -2 to 1/100th second prett predicted travel time (uncorrected) f10.2 rawres observed residual (uncorrected) f7.2 --------------------------------------------------------- ecor station elevation correction f7.2 (subtracted from observed travel time) scor patch 'station' correction f7.2 (subtracted from observed travel time) elcor ellipticity correction f7.2 (subtracted from observed travel time) resid observed residual f7.2 (999.99 if unknown) iflg 0 = first arriving P phase used i2 1 = first arriving P phase not used 2 = later phase used 3 = later phase not used wgt residual weight f5.2 ( = 0 if not used) --------------------------------------------------------- tdelta surface focus distance f8.3 ( = 0 for upgoing phases) ttime observed surface focus travel time f10.2 (corrected) ( = 0 for upgoing phases) --------------------------------------------------------- delisc ISC distance to station f8.3 (999.999 if unknown) resisc ISC observed residual f7.2 (999.99 if unknown) --------------------------------------------------------- w Arrival time read from waveform a1 --------------------------------------------------------- --------------------------------------------------------- ievt ISC event identification number i10 ---------------------------------------------------------","title":"Isc ehb res format"},{"location":"data/preparation/","text":"Data preparation Station file The first step in data processing is to obtain the station information (station code, coordinates, and elevation). The latest EHB datasets (EHB08 and ISC-EHB) also include a station file named stations_ehb , with station codes and coordinates. The most relevant fields are: station code geographic latitude (degrees) in the range [-90, 90] longitude (degrees) in the range [0, 360] elevation (meters above sea level) The station file contains a 2-line header, and a 5-line footer. After each line containing station information there are two extra blank lines: Code Station name/Region Latitude Longitude Elevation Depth Prime Status ============================================================================================================== 109C 32.88925 242.89000 0.0 Open 115A 32.69972 247.77000 1.0 Open 116A 32.55933 248.30000 0.0 Open A04A 48.71890 237.29000 0.0 Open A05A 48.99965 237.91000 0.0 Open A06A 49.09756 238.52000 1.0 Open ... ZUL 47.48077 8.39000 700.0 Open ZUR 47.36783 8.58000 604.0 Open ZZT 35.36345 270.62800 120.0 Open International Seismological Centre Pipers Lane, Thatcham, Berkshire United Kingdom RG19 4NS voice: +44 (0)1635 861022 fax: +44 (0)1635 872351 Station elevations should be checked against the latest version of the ISC station registry and/or a moder digital elevation model. For example in the registry the station elevation for station A06A (Chilliwack, BC, Canada) is 576 m, while in the above file is 1 m. Get station info from RES files Station coordinates and elevations can also be obtained from the RES files, together with additional information, such as the number of phases and the dates of the first and last reported phase. It is preferable to obtain the station information from the RES file because they are the values that were actually used for location. Geocentric vs geographic IMPORTANT : Event and station coordinates in the RES files are given in geocentric coordinates not in the usual geographic (also called geodetic) coordinates. In addition, colatitude is reported instead of latitude in the RES files. In the EHB location code and in the tomography codes the coordinates used are geocentric (co)latitude and longitude because they are more convenient to calculate distances on an ellipse. Since we assume that the Earth is an ellipsoid of revolution, geocentric and geographic longitude are identical. However geographic and geocentric latitudes differ. If \\varphi is the geographic latitude and \\varphi^\\prime is the geocentric latitude, then \\tan \\varphi^\\prime = (1-e^2) \\tan \\varphi where e is the eccentricity . Isolating \\varphi^\\prime \\varphi^\\prime = \\arctan [(1-e^2) \\tan(\\varphi)] The relationship between eccentricity e and flattening f is e = \\sqrt{ f ( 2 - f) } , where flattening is defined as f = \\frac{a-b}{a} . The geocentric latitude is consequently lesser (in absolute value) than the geographic latitude, except at the equator and the poles where they are equal. See this link . IMPORTANT: An additional complication is that the tomography code uses co-latitude \\theta instead of latitude \\varphi . The relationship between both is: \\theta = 90^\\circ - \\varphi Codes The first code used to extract the station information from a RES file is readsta . This code reads an input file called res.in that contains the list of RES files to be processed. For example, for the EHB02 dataset: 4-69RES 70-75RES 76-81RES 82-87RES 88-93RES 94-97RES 98-00RES The function readres defined in readres.f can read RES files for the EHB02, EHB03, and EHB04 dataset. It must be modified to read the format of the more recent EHB08 and ISC-EHB datasets. The output of readsta is a file called ehb.sta with the following format: DAR 102.327 130.818 0.006 9193 19640101 19720604 PMG 99.344 147.159 0.065 45042 19640101 20001231 CTA 109.965 146.254 0.358 80830 19640101 20001231 RAB 94.165 152.163 0.185 23890 19640101 20001231 MAN 75.434 121.078 0.070 8975 19640101 19910424 MUN 121.805 116.208 0.253 26967 19640101 20001230 ADE 124.786 138.709 0.655 23056 19640101 20001231 BRS 117.234 152.775 0.525 52981 19640101 19931201 ... PINOR 46.382 239.128 1.510 44 20001115 20001231 BRNJ 49.508 285.434 0.050 22 20001116 20001222 SLFW 42.434 239.472 1.750 3 20001123 20001125 BDM 52.233 238.134 0.220 25 20001202 20001230 KNZ 128.832 177.674 0.218 23 20001210 20001231 LAMM 48.582 237.374 1.769 1 20001220 20001220 PCMD 43.304 237.700 0.239 2 20001224 20001231 The meaning of the columns is the following: station code geocentric colatitude in degrees, range: [0, 180] geocentric longitude in degrees, range: [0, 360] elevation in km total number of phases for each station date of first reported phase: YYYYMMDD date of last reported phase: YYYYMMDD If a station in the RES files has the same station code but different coordinates it is treated as a new station. Therefore ehb.sta can contain duplicated stations. To find out the station codes with more than one entry: $ awk '{print $1}' ehb.sta | sort | uniq -cd # guniq in macOS It is more convenient to have the station file sorted by station name. Therefore we create a new file sort.sta : $ sort +0 -1 +5n -6n -o sort.sta ehb.sta # this command can be simplified and in outdated syntax Since the coordinates in sort.sta are geocentric, they need to be converted to geographic in order to plot the station on the map, and in case we want to compare them with the coordinates in stations_ehb : sta2geo << END sort.sta END Output file is ehbgeo.sta (need to check this!!!) Finally the sorted station file needs to be converted to the station file format used by the tomography codes. This is carried out by other small program called checksta (does some additional checks such as duplicated stations????) checksta << END sort.sta This produces and output file with the name num_stat_list and the following format: A11 1 -70.198 47.050 0.061 A16 2 -70.006 47.278 0.015 A21 3 -69.690 47.511 0.046 A54 4 -70.413 47.264 0.381 A61 5 -70.090 47.501 0.358 A64 6 -69.892 47.634 0.137 AAA 7 76.947 43.079 0.800 AAE 8 38.766 8.969 2.442 AAHD 9 32.753 23.604 0.180 ... ZSC 6750 121.186 30.926 0.090 ZSP 6751 -122.257 37.758 0.119 ZST 6752 17.103 48.004 0.250 ZUG 6753 41.883 42.324 0.110 ZUL 6754 8.390 47.289 0.740 ZUR 6755 8.580 47.176 0.604 ZZT 6756 -89.372 35.182 0.120 The meaning of the columns is the following: station code station number geocentric longitude in degrees, range [-180, 180] (check!!!) geocentric latitude in degrees, range [-90, 90] (check!!!) elevation in km [Check checksta to see if conversion to latitude and longitude is correct) All this process has been combined in a single shell script stalist.csh , located in /Volumes/DATA4/EHB/data/EHB03/STATIONS/stalist.csh [This script should be re-written in bash shell and lots of unnecessary checks removed] #!/bin/csh set nonomatch # Cleanup previous run /bin/rm -f sort.sta num_stat_list duplic.sta duplic.list # Create station list from RES file (ehb.sta) readsta # Sort ehb.sta by station name (1st field) and by # date of first reading (6th field) sort +0 -1 +5n -6n -o sort.sta ehb.sta wc -l sort.sta # First create output in geographic lat,lon coordinates for plotting sta2geo << END sort.sta END # Then check for duplicated stations awk '{print $1}' sort.sta >! sta.m # \".m\" stands for multiple awk '{print $1}' sort.sta | sort -u >! sta.u # \".u\" stands for unique comm -23 sta.m sta.u >! sta.d sort -u sta.d >! tmp diff sta.d tmp wc -l sta.d tmp /bin/rm -f tmp set nd = `cat sta.d | wc -l` @ i = 1 touch duplic.list while ($i <= $nd) set sta = `awk 'NR == i' i=$i sta.d` awk '$1 == kstnm' kstnm=$sta sort.sta >> duplic.list echo \"\" >> duplic.list @ i++ end # run checksta to create num_stat_list checksta << END sort.sta END wc -l num_stat_list duplic.sta /bin/rm -f sort.sta sta.m sta.u sta.d Station file is read by trres with the following format: read(30,3002,end=100,iostat=ios) ksta,idum,rlon,rlat,relev 3002 format(a6,i8,3f9.3)","title":"Data preparation"},{"location":"data/preparation/#data-preparation","text":"","title":"Data preparation"},{"location":"data/preparation/#station-file","text":"The first step in data processing is to obtain the station information (station code, coordinates, and elevation). The latest EHB datasets (EHB08 and ISC-EHB) also include a station file named stations_ehb , with station codes and coordinates. The most relevant fields are: station code geographic latitude (degrees) in the range [-90, 90] longitude (degrees) in the range [0, 360] elevation (meters above sea level) The station file contains a 2-line header, and a 5-line footer. After each line containing station information there are two extra blank lines: Code Station name/Region Latitude Longitude Elevation Depth Prime Status ============================================================================================================== 109C 32.88925 242.89000 0.0 Open 115A 32.69972 247.77000 1.0 Open 116A 32.55933 248.30000 0.0 Open A04A 48.71890 237.29000 0.0 Open A05A 48.99965 237.91000 0.0 Open A06A 49.09756 238.52000 1.0 Open ... ZUL 47.48077 8.39000 700.0 Open ZUR 47.36783 8.58000 604.0 Open ZZT 35.36345 270.62800 120.0 Open International Seismological Centre Pipers Lane, Thatcham, Berkshire United Kingdom RG19 4NS voice: +44 (0)1635 861022 fax: +44 (0)1635 872351 Station elevations should be checked against the latest version of the ISC station registry and/or a moder digital elevation model. For example in the registry the station elevation for station A06A (Chilliwack, BC, Canada) is 576 m, while in the above file is 1 m.","title":"Station file"},{"location":"data/preparation/#get-station-info-from-res-files","text":"Station coordinates and elevations can also be obtained from the RES files, together with additional information, such as the number of phases and the dates of the first and last reported phase. It is preferable to obtain the station information from the RES file because they are the values that were actually used for location.","title":"Get station info from RES files"},{"location":"data/preparation/#geocentric-vs-geographic","text":"IMPORTANT : Event and station coordinates in the RES files are given in geocentric coordinates not in the usual geographic (also called geodetic) coordinates. In addition, colatitude is reported instead of latitude in the RES files. In the EHB location code and in the tomography codes the coordinates used are geocentric (co)latitude and longitude because they are more convenient to calculate distances on an ellipse. Since we assume that the Earth is an ellipsoid of revolution, geocentric and geographic longitude are identical. However geographic and geocentric latitudes differ. If \\varphi is the geographic latitude and \\varphi^\\prime is the geocentric latitude, then \\tan \\varphi^\\prime = (1-e^2) \\tan \\varphi where e is the eccentricity . Isolating \\varphi^\\prime \\varphi^\\prime = \\arctan [(1-e^2) \\tan(\\varphi)] The relationship between eccentricity e and flattening f is e = \\sqrt{ f ( 2 - f) } , where flattening is defined as f = \\frac{a-b}{a} . The geocentric latitude is consequently lesser (in absolute value) than the geographic latitude, except at the equator and the poles where they are equal. See this link . IMPORTANT: An additional complication is that the tomography code uses co-latitude \\theta instead of latitude \\varphi . The relationship between both is: \\theta = 90^\\circ - \\varphi","title":"Geocentric vs geographic"},{"location":"data/preparation/#codes","text":"The first code used to extract the station information from a RES file is readsta . This code reads an input file called res.in that contains the list of RES files to be processed. For example, for the EHB02 dataset: 4-69RES 70-75RES 76-81RES 82-87RES 88-93RES 94-97RES 98-00RES The function readres defined in readres.f can read RES files for the EHB02, EHB03, and EHB04 dataset. It must be modified to read the format of the more recent EHB08 and ISC-EHB datasets. The output of readsta is a file called ehb.sta with the following format: DAR 102.327 130.818 0.006 9193 19640101 19720604 PMG 99.344 147.159 0.065 45042 19640101 20001231 CTA 109.965 146.254 0.358 80830 19640101 20001231 RAB 94.165 152.163 0.185 23890 19640101 20001231 MAN 75.434 121.078 0.070 8975 19640101 19910424 MUN 121.805 116.208 0.253 26967 19640101 20001230 ADE 124.786 138.709 0.655 23056 19640101 20001231 BRS 117.234 152.775 0.525 52981 19640101 19931201 ... PINOR 46.382 239.128 1.510 44 20001115 20001231 BRNJ 49.508 285.434 0.050 22 20001116 20001222 SLFW 42.434 239.472 1.750 3 20001123 20001125 BDM 52.233 238.134 0.220 25 20001202 20001230 KNZ 128.832 177.674 0.218 23 20001210 20001231 LAMM 48.582 237.374 1.769 1 20001220 20001220 PCMD 43.304 237.700 0.239 2 20001224 20001231 The meaning of the columns is the following: station code geocentric colatitude in degrees, range: [0, 180] geocentric longitude in degrees, range: [0, 360] elevation in km total number of phases for each station date of first reported phase: YYYYMMDD date of last reported phase: YYYYMMDD If a station in the RES files has the same station code but different coordinates it is treated as a new station. Therefore ehb.sta can contain duplicated stations. To find out the station codes with more than one entry: $ awk '{print $1}' ehb.sta | sort | uniq -cd # guniq in macOS It is more convenient to have the station file sorted by station name. Therefore we create a new file sort.sta : $ sort +0 -1 +5n -6n -o sort.sta ehb.sta # this command can be simplified and in outdated syntax Since the coordinates in sort.sta are geocentric, they need to be converted to geographic in order to plot the station on the map, and in case we want to compare them with the coordinates in stations_ehb : sta2geo << END sort.sta END Output file is ehbgeo.sta (need to check this!!!) Finally the sorted station file needs to be converted to the station file format used by the tomography codes. This is carried out by other small program called checksta (does some additional checks such as duplicated stations????) checksta << END sort.sta This produces and output file with the name num_stat_list and the following format: A11 1 -70.198 47.050 0.061 A16 2 -70.006 47.278 0.015 A21 3 -69.690 47.511 0.046 A54 4 -70.413 47.264 0.381 A61 5 -70.090 47.501 0.358 A64 6 -69.892 47.634 0.137 AAA 7 76.947 43.079 0.800 AAE 8 38.766 8.969 2.442 AAHD 9 32.753 23.604 0.180 ... ZSC 6750 121.186 30.926 0.090 ZSP 6751 -122.257 37.758 0.119 ZST 6752 17.103 48.004 0.250 ZUG 6753 41.883 42.324 0.110 ZUL 6754 8.390 47.289 0.740 ZUR 6755 8.580 47.176 0.604 ZZT 6756 -89.372 35.182 0.120 The meaning of the columns is the following: station code station number geocentric longitude in degrees, range [-180, 180] (check!!!) geocentric latitude in degrees, range [-90, 90] (check!!!) elevation in km [Check checksta to see if conversion to latitude and longitude is correct) All this process has been combined in a single shell script stalist.csh , located in /Volumes/DATA4/EHB/data/EHB03/STATIONS/stalist.csh [This script should be re-written in bash shell and lots of unnecessary checks removed] #!/bin/csh set nonomatch # Cleanup previous run /bin/rm -f sort.sta num_stat_list duplic.sta duplic.list # Create station list from RES file (ehb.sta) readsta # Sort ehb.sta by station name (1st field) and by # date of first reading (6th field) sort +0 -1 +5n -6n -o sort.sta ehb.sta wc -l sort.sta # First create output in geographic lat,lon coordinates for plotting sta2geo << END sort.sta END # Then check for duplicated stations awk '{print $1}' sort.sta >! sta.m # \".m\" stands for multiple awk '{print $1}' sort.sta | sort -u >! sta.u # \".u\" stands for unique comm -23 sta.m sta.u >! sta.d sort -u sta.d >! tmp diff sta.d tmp wc -l sta.d tmp /bin/rm -f tmp set nd = `cat sta.d | wc -l` @ i = 1 touch duplic.list while ($i <= $nd) set sta = `awk 'NR == i' i=$i sta.d` awk '$1 == kstnm' kstnm=$sta sort.sta >> duplic.list echo \"\" >> duplic.list @ i++ end # run checksta to create num_stat_list checksta << END sort.sta END wc -l num_stat_list duplic.sta /bin/rm -f sort.sta sta.m sta.u sta.d Station file is read by trres with the following format: read(30,3002,end=100,iostat=ios) ksta,idum,rlon,rlat,relev 3002 format(a6,i8,3f9.3)","title":"Codes"}]}